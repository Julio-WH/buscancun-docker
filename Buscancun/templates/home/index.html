<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Buscaribe</title>
</head>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" ></script>
<body>
<h1>Bienvenido a Buscaribe</h1>

 <div id="map" style="height: 500px"></div>
</body>
<script type="text/javascript">
    var map = L.map('map').setView([51.505, -0.09], 13);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);

const ws = new WebSocket("ws://"+window.location.host+"/ws/")

ws.onopen = () => {
  console.log('Conexión WebSocket establecida.');
};

ws.onmessage = (event) => {
  const message = JSON.parse(event.data);
  console.log('Mensaje recibido:', message);

  // Aquí puedes manipular el mensaje recibido y mostrarlo en tu página web
  // Por ejemplo, puedes agregarlo a un div en tu HTML
  const messageDiv = document.createElement('div');
  messageDiv.textContent = message.message;
  document.body.appendChild(messageDiv);
};

</script>
</html>